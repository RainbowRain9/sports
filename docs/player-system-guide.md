# 运动员自助系统使用指南

## 🎯 系统概述

运动员自助系统是嘉园运动会系统的重要组成部分，为运动员提供完整的自助服务功能，包括个人信息管理、项目报名、成绩查询等核心功能。

## 🚀 快速开始

### 1. 数据库部署

首先执行数据库扩展脚本：

```bash
# 在MySQL中执行扩展脚本
mysql -u root -p sports < sports-backend/database/player-registration-extension.sql

# 或者执行测试版本
mysql -u root -p sports < sports-backend/database/test-registration-extension.sql
```

### 2. 系统启动

#### 后端启动
```bash
cd sports-backend
npm run dev
```

#### 前端启动
```bash
cd sports-web
NODE_OPTIONS="--openssl-legacy-provider" npm start
```

### 3. 访问系统

- 前端地址：http://localhost:8080
- 后端API：http://localhost:7001

## 🔐 运动员登录

### 默认测试账号
- **赵一**: 001 / 123456
- **王二**: 002 / 123456  
- **李三**: 003 / 123456

### 登录流程
1. 访问系统首页
2. 选择"运动员"角色
3. 输入学号和密码
4. 登录成功后自动跳转到个人中心

## 📱 功能模块

### 1. 个人中心 (Dashboard)
- **功能概述**: 运动员专用首页，展示个人信息概览和快捷操作
- **主要内容**:
  - 个人基本信息展示
  - 报名统计数据
  - 成绩统计信息
  - 快捷操作入口
  - 最近成绩列表

### 2. 个人信息管理
- **功能概述**: 查看和编辑个人基本信息
- **可编辑字段**:
  - 姓名
  - 性别
  - 生日
- **只读字段**:
  - 学号
  - 班级
  - 运动员编号
  - 用户名
- **附加功能**:
  - 修改登录密码

### 3. 项目报名
- **功能概述**: 查看可报名项目并进行在线报名
- **主要功能**:
  - 浏览所有开放报名的体育项目
  - 查看项目详细信息
  - 在线提交报名申请
  - 报名限制验证
- **报名规则**:
  - 每人最多报名3个项目
  - 每班每项目最多5人
  - 项目名额限制

### 4. 我的报名
- **功能概述**: 管理已报名的项目
- **主要功能**:
  - 查看所有报名记录
  - 按状态筛选报名
  - 取消报名（限已报名和已确认状态）
  - 查看报名详情
- **报名状态**:
  - 已报名：刚提交的报名
  - 已确认：管理员确认的报名
  - 已取消：主动取消的报名
  - 已拒绝：被管理员拒绝的报名

### 5. 我的成绩
- **功能概述**: 查看个人比赛成绩和排名
- **主要功能**:
  - 查看所有比赛成绩
  - 按项目和时间筛选
  - 查看成绩详情和排名
  - 成绩统计分析
- **统计信息**:
  - 参赛次数
  - 最佳成绩
  - 平均成绩
  - 前三名次数

## 🔧 技术架构

### 前端技术栈
- **框架**: Vue.js 2.x
- **UI组件**: Element UI
- **状态管理**: Vuex
- **路由**: Vue Router
- **HTTP客户端**: Axios

### 后端技术栈
- **框架**: Egg.js
- **数据库**: MySQL
- **认证**: JWT Token
- **权限控制**: RBAC

### 数据库设计

#### 核心表结构
1. **registration** - 报名表
   - 存储运动员报名信息
   - 支持报名状态管理
   - 记录报名时间和操作历史

2. **competition** - 比赛项目表（扩展）
   - 添加报名相关字段
   - 支持报名时间控制
   - 参赛人数限制

3. **player** - 运动员表（扩展）
   - 添加登录认证字段
   - 支持账号状态管理

## 🛡️ 权限控制

### 角色权限
运动员角色具有以下权限：
- `profile:view` - 个人信息查看
- `profile:edit` - 个人信息编辑
- `registration:create` - 报名参赛
- `registration:view` - 查看报名
- `score:view` - 成绩查看
- `schedule:view` - 赛程查看

### 路由保护
- 所有运动员页面都需要登录认证
- 自动验证用户角色权限
- 未授权访问自动跳转登录页

### API权限
- 所有API接口都有权限验证
- JWT Token自动验证
- 角色权限中间件保护

## 📊 API接口

### 运动员个人信息
- `GET /api/player/profile` - 获取个人信息
- `PUT /api/player/profile` - 更新个人信息
- `GET /api/player/stats` - 获取统计信息
- `PUT /api/player/password` - 修改密码
- `GET /api/player/scores` - 获取个人成绩

### 报名管理
- `GET /api/registration/available-events` - 获取可报名项目
- `POST /api/registration/register` - 创建报名
- `GET /api/registration/my-registrations` - 获取我的报名
- `DELETE /api/registration/:id` - 取消报名
- `POST /api/registration/check-limits` - 检查报名限制

## 🎨 界面设计

### 设计原则
- **用户友好**: 简洁直观的界面设计
- **响应式**: 支持桌面端和移动端
- **一致性**: 统一的视觉风格和交互模式
- **可访问性**: 良好的可访问性支持

### 主要特色
- 专用的运动员布局和导航
- 卡片式信息展示
- 直观的数据可视化
- 友好的操作反馈

## 🔍 故障排除

### 常见问题

1. **登录失败**
   - 检查用户名密码是否正确
   - 确认账号状态是否正常
   - 检查网络连接

2. **报名失败**
   - 检查是否超出报名限制
   - 确认项目是否还有名额
   - 检查报名时间是否有效

3. **数据加载失败**
   - 检查后端服务是否正常
   - 确认数据库连接是否正常
   - 查看浏览器控制台错误信息

### 调试方法
- 查看浏览器开发者工具
- 检查网络请求状态
- 查看后端日志输出

## 📈 未来扩展

### 计划功能
- 移动端APP支持
- 消息通知系统
- 成绩分析报告
- 社交功能
- 离线数据缓存

### 技术优化
- 性能优化
- 安全加固
- 用户体验提升
- 代码重构

---

**注意**: 本系统为嘉庚大二实践周作业项目，仅供学习和演示使用。
